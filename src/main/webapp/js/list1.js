$(document).ready(function(){(function($){$.fn.slider=function(arg){var me=$(this),opt=$.extend({inteval:5000,auto:true,loop:false,prev:me.find(".prev"),next:me.find(".next"),pageBtns:"",finish:function(){},start:function(){}},arg),pageBtns,scrollable=me.find(".scrollable"),ori_items=me.find(".items"),total_num=me.find(".item").length,cur_page=0,mov_w=me.find(".item").outerWidth(),move_left=0,interval;opt.start();if(opt.loop){ori_items.append(ori_items.find(".item").clone());ori_items.prepend(ori_items.find(".item").clone());scrollable.scrollLeft(getCurScroLeft());}opt.prev.length&&opt.prev.bind("click",move).hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")});opt.next.length&&opt.next.bind("click",move).hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")});if(opt.auto){interval=setInterval(move,opt.inteval);me.hover(function(){clearInterval(interval)},function(){interval=setInterval(move,opt.inteval);move_left=0});}if(opt.pageBtns&&!opt.loop){pageBtns=opt.pageBtns;pageBtns.bind("click",moveTo);}function moveTo(e){pageBtns.unbind("click",moveTo);var cur_li=$(e.target).closest("li"),num=cur_li.index();pageBtns.removeClass("select");cur_li.addClass("select");var cur_scrollLeft=num*mov_w;scrollable.animate({scrollLeft:cur_scrollLeft},{duration:'normal',easing:'swing',complete:function(){pageBtns.bind("click",moveTo);opt.finish(num)},queue:false});}function move(e){opt.prev.length&&opt.prev.unbind("click",move);opt.next.length&&opt.next.unbind("click",move);if(e){clearInterval(interval);var cur_btn=$(e.target);if(cur_btn.hasClass("prev")){move_left=1};if(cur_btn.hasClass("next")){move_left=0};}var cur_scrollLeft=move_left?getCurScroLeft()-mov_w:getCurScroLeft()+mov_w;scrollable.stop().animate({scrollLeft:cur_scrollLeft},{duration:'normal',easing:'swing',complete:complate,queue:false});}function complate(){cur_page=move_left?cur_page-1:cur_page+1;if(cur_page<=-total_num+2){cur_page+=total_num;resetscroll()}if(cur_page>=2*total_num-2){cur_page-=total_num;resetscroll()}opt.prev.length&&opt.prev.bind("click",move);opt.next.length&&opt.next.bind("click",move);opt.finish();}function resetscroll(){scrollable.scrollLeft(getCurScroLeft());}function getCurScroLeft(){return opt.loop?total_num*mov_w+cur_page*mov_w:cur_page*mov_w;}}})(jQuery);$("#banner-slide").slider({interval:5000,loop:true,auto:true});$("#ex-app-wrapper").slider({interval:5000,loop:false,auto:false,pageBtns:$("#op-page-list li")});$("#banner-slide .item").hover(function(){$(this).find(".info-wrapper").animate({'top':190},{duration:300,queue:false})},function(){$(this).find(".info-wrapper").animate({'top':266},{duration:300,queue:false})});$(".app-list li .normal-wrap").hover(function(){var cur_li=$(this).parents("li");cur_li.data("setTime",setTimeout(function(){cur_li.addClass("hover").find(".app-info-pannel").offset({left:cur_li.offset().left+90,top:cur_li.offset().top+14});}),100);},function(){var cur_li=$(this).parents("li");clearTimeout(cur_li.data("setTime"));cur_li.removeClass("hover");});$(".types-list li:even").addClass("left");$(".filter-app-list li").hover(function(){var me=$(this);me.data("set_num",setTimeout(function(){me.animate({"scrollTop":me.height()},{duration:300})},200));},function(){var me=$(this);clearTimeout(me.data("set_num"));me.animate({"scrollTop":0},{duration:100});});$(".filter-app-list li .tit").hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")});$(".weekly-list li").bind("mouseenter",weekly_ani).bind("mouseleave",function(){clearTimeout($(this).data("setTime"));});function weekly_ani(e){var me=$(e.target).closest("li");if(me.hasClass("current"))return;var orili=me.parent().find(".current");$(this).data("setTime",setTimeout(function(){weekly_move(me,orili,100,39)},150));}function weekly_move(me,orili,h,h2){me.addClass("current");$(".weekly-list li").unbind("mouseenter",weekly_ani);setTimeout(function(){var cur_h=me.height();if(cur_h<h-2){var cur_orih=orili.height();var dh=Math.round((h-cur_h)/2.5);me.css("height",cur_h+dh);orili.css("height",cur_orih-dh);setTimeout(arguments.callee,25);}else{me.addClass("current").css("height",h);orili.css("height",h2);$(".weekly-list li").bind("mouseenter",weekly_ani);orili.removeClass("current");}},25);}$(".weekly-list").find("li:first").addClass("current").animate({height:100}, 300);$(".we-down .we-down-list").length&&startWedown();function startWedown(){var cur_ul=$(".we-down .we-down-list"),lis=cur_ul.find("li"),dh=lis.outerHeight(),cur_num=0;cur_ul.append(lis.clone());setInterval(function(){cur_ul.stop().animate({"scrollTop":++cur_num*dh},{duration:300,queue:false,complete:function(){if(cur_num>=lis.length){cur_ul.scrollTop(0);cur_num=0}}});},5000);}$(".all-cate .op-li").length&&$(".all-cate .op-li").bind("click",function(){var me=$(this),cur_wrap=me.parents(".all-cate");if(me.hasClass("unfold")){cur_wrap.animate({height:183},300);me.removeClass("unfold");}else{cur_wrap.animate({height:91},300);me.addClass("unfold");}});});